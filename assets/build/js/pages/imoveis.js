!function(t){function o(){t(".filters .filter").each((function(){t(this).find("> button").on("click",(function(){t(this).parent().hasClass("opened")?(t(".filters .filter").removeClass("opened"),t(".filters").css({"overflow-x":"scroll"})):(t(".filters .filter").removeClass("opened"),t(this).parent().addClass("opened"),t(".filters").css("overflow","visible"))})),t(this).find(".btn-aplicar").on("click",(function(){t(this).parents(".filter").hasClass("valid")&&t(this).parents(".filter").removeClass("opened").addClass("active")})),t(this).find(".btn-limpar").on("click",(function(){t(this).parents(".filter").removeClass("active opened valid")})),t(this).find(".filter-autocomplete").on("input",(function(){t(this).val().length>0?(t(this).parents(".dropdown-menu").find(".dropdown-item").hide(),t(this).parents(".dropdown-menu").find('.dropdown-item:contains("'+t(this).val()+'")').show(),t(this).parents(".dropdown-menu").find('.dropdown-item:contains("'+t(this).val().toLowerCase()+'")').show(),t(this).parents(".dropdown-menu").find('.dropdown-item:contains("'+t(this).val().charAt(0).toUpperCase()+t(this).val().substr(1).toLowerCase()+'")').show()):t(this).parents(".dropdown-menu").find(".dropdown-item").show()}))})),function(){localStorage.getItem("filtros")&&t(".filter-subcategoria .btn").html(JSON.parse(localStorage.getItem("filtros")).subcategoria);t(".filter-subcategoria .dropdown-item").on("click",(function(){var o,i;o=t(this),i=o,$subcategoria=i.data("value"),t(".filter-subcategoria .btn").html(i.html()),$filtros.subcategoria=$subcategoria,e(),r(null,!0)}))}(),function(){localStorage.getItem("filtros")&&t(".filter-produto .btn").html(JSON.parse(localStorage.getItem("filtros")).produto_nome);t(".filter-produto .dropdown-item").on("click",(function(){var o,i;o=t(this),i=o,$produto=i.data("value"),$produto_nome=i.html(),t(".filter-produto .btn").html(i.html()),$filtros.produto=$produto,$filtros.produto_nome=$produto_nome,e(),r(null,!0)}))}(),t(".filter-keyword").bind("enterKey",(function(){$filtros.keyword=t(this).val(),e(),r(null,!0)})),t(".filter-keyword").keyup((function(o){13==o.keyCode&&t(this).trigger("enterKey")})),t(".filter-keyword").find(".filter-btn").click((function(){t(".filter-keyword input").trigger("enterKey")}))}function e(){$page=1,delete $filtros.paginado,delete $filtros.startpag,locations=[],imoveisHtml=[],t(".imoveis-list .imoveis .imoveis-row").html("")}function i(o){o?t("[data-filtered]").addClass("active"):t("[data-filtered]").removeClass("active")}function a(o){o?t("[data-total]").addClass("active"):t("[data-total]").removeClass("active")}function s(o,e){o?(t("[data-error]").addClass("active"),t("[data-error]").html(e)):t("[data-error]").removeClass("active")}function l(o){o?(t("[data-loader]").addClass("active"),$loading=!0):(t("[data-loader]").removeClass("active"),$loading=!1)}function r(e,i){if(console.log($loading),!$loading){console.log("...loading"),l(!0);let r=JSON.parse(ajaxapi.query_vars).category_name;if(localStorage.getItem("filtros")&&!i){let t=JSON.parse(localStorage.getItem("filtros"));t.category_name==r?$filtros=t:localStorage.removeItem("filtros")}else 0!=Object.keys($filtros).length&&($filtros.category_name=JSON.parse(ajaxapi.query_vars).category_name,localStorage.setItem("filtros",JSON.stringify($filtros)));o(),t.ajax({url:ajaxapi.ajaxurl,type:"post",data:{action:"get_estabelecimentos",query_vars:ajaxapi.query_vars,get:ajaxapi.get,post:ajaxapi.post,query:ajaxapi.query,filters:$filtros,page:$page},beforeSend:function(){s(!1),e||a(!1),l(!0),n(!1)},success:function(o){$imoveisTotais=o.total,$imoveisCarregadosTotais=o.imoveis.length,$i=0,a(!0),$imoveisTotais>5&&n(!0);var e,i,s,r=o.html;o.imoveis.forEach((t,o)=>{if(t.lat&&t.lng){let e={lat:t.lat,lng:t.lng};locations.push(e),imoveisHtml.push(r[o])}}),e=new google.maps.Map(document.getElementById("map"),{zoom:14,center:{lat:-8.06094,lng:-34.8801875},mapTypeControl:!1,streetViewControl:!1,rotateControl:!1}),i=new google.maps.InfoWindow,s=locations.map((function(t,o){var a=o,s=new google.maps.Marker({position:t,icon:ajaxapi.assets+"/img/layout/m2.png",label:{text:"1",textSize:13,fontFamily:"ITC Avant Garde Gothic",fontWeight:"bold",color:"white"}});return google.maps.event.addListener(s,"click",(function(t){i.setContent(imoveisHtml[a]),i.open(e,s)})),s})),new MarkerClusterer(e,s,{styles:[{url:ajaxapi.assets+"/img/layout/m1.png",width:53,height:53,fontFamily:"ITC Avant Garde Gothic",textSize:15,textColor:"white"}]}),l(!1),1==$imoveisTotais?t(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóvel com essas características"):(0==$imoveisTotais||$imoveisTotais>1)&&t(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóveis com essas características"),$imoveisTotais>0?t(".imoveis-blank").removeClass("show"):t(".imoveis-blank").addClass("show"),t(".imoveis-list .imoveis #loader, .imoveis-list .imoveis #error").remove(),t(".imoveis-list .imoveis .imoveis-row").append(o.html),t(".imoveis-list .imoveis .imoveis-row").children().length>5&&function(){if(t(window).width()>991){var o=t("#footer").offset(),e=t(window).height(),i=o.top-e;t(window).on("scroll",(function(o){var e=t(window).scrollTop();e>995&&e<i?t(".col-right").addClass("fixed").removeClass("fixed-bottom"):e>i-50?t(".col-right").addClass("fixed-bottom").removeClass("fixed"):e<995&&t(".col-right").removeClass("fixed-bottom fixed")}))}}()},error:function(o,e,i){t(".imoveis-list .imoveis #loader").remove(),l(!1),s(!0,o.responseText)}})}}function n(o){o?t("[data-loadmorebtn]").removeClass("d-none").addClass("d-block"):t("[data-loadmorebtn]").removeClass("d-block").addClass("d-none")}$filtros={},$scroll=!0,$page=1,locations=[],imoveisHtml=[],$postVars=ajaxapi.post,$imoveisTotais=0,$loading=!1,$postVars&&$postVars.length>0&&i(!0),r(),t("[data-loadmorebtn]").on("click",(function(o){o.preventDefault(),$page<$imoveisTotais&&t(".imoveis .imoveis-row > div").length<$imoveisTotais?($page+=1,r(!0)):n(!1)}))}(jQuery);