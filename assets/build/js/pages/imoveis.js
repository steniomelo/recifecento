!function(t){function e(){t(".filters .filter").each((function(){t(this).find("> button").on("click",(function(){t(this).parent().hasClass("opened")?(t(".filters .filter").removeClass("opened"),t(".filters").css({"overflow-x":"scroll"})):(t(".filters .filter").removeClass("opened"),t(this).parent().addClass("opened"),t(".filters").css("overflow","visible"))})),t(this).find(".btn-aplicar").on("click",(function(){t(this).parents(".filter").hasClass("valid")&&t(this).parents(".filter").removeClass("opened").addClass("active")})),t(this).find(".btn-limpar").on("click",(function(){t(this).parents(".filter").removeClass("active opened valid")})),t(this).find(".filter-autocomplete").on("input",(function(){t(this).val().length>0?(t(this).parents(".dropdown-menu").find(".dropdown-item").hide(),t(this).parents(".dropdown-menu").find('.dropdown-item:contains("'+t(this).val()+'")').show(),t(this).parents(".dropdown-menu").find('.dropdown-item:contains("'+t(this).val().toLowerCase()+'")').show(),t(this).parents(".dropdown-menu").find('.dropdown-item:contains("'+t(this).val().charAt(0).toUpperCase()+t(this).val().substr(1).toLowerCase()+'")').show()):t(this).parents(".dropdown-menu").find(".dropdown-item").show()}))})),function(){localStorage.getItem("filtros")&&t(".filter-subcategoria .btn").html(JSON.parse(localStorage.getItem("filtros")).subcategoria);t(".filter-subcategoria .dropdown-item").on("click",(function(){var e,i;e=t(this),i=e,$subcategoria=i.data("value"),t(".filter-subcategoria .btn").html(i.html()),$filtros.subcategoria=$subcategoria,o(),l(null,!0)}))}(),function(){localStorage.getItem("filtros")&&t(".filter-produto .btn").html(JSON.parse(localStorage.getItem("filtros")).produto_nome);t(".filter-produto .dropdown-item").on("click",(function(){var e,i;e=t(this),i=e,$produto=i.data("value"),$produto_nome=i.html(),t(".filter-produto .btn").html(i.html()),$filtros.produto=$produto,$filtros.produto_nome=$produto_nome,o(),l(null,!0)}))}(),t(".filter-keyword").bind("enterKey",(function(){$filtros.keyword=t(this).val(),o(),l(null,!0)})),t(".filter-keyword").keyup((function(e){13==e.keyCode&&t(this).trigger("enterKey")})),t(".filter-keyword").find(".filter-btn").click((function(){t(".filter-keyword").trigger("enterKey")}))}function o(){$page=1,delete $filtros.paginado,delete $filtros.startpag,locations=[],imoveisHtml=[],t(".imoveis-list .imoveis .imoveis-row").html("")}function i(e){e?t("[data-filtered]").addClass("active"):t("[data-filtered]").removeClass("active")}function a(e){e?t("[data-total]").addClass("active"):t("[data-total]").removeClass("active")}function s(e,o){e?(t("[data-error]").addClass("active"),t("[data-error]").html(o)):t("[data-error]").removeClass("active")}function r(e){e?t("[data-loader]").addClass("active"):t("[data-loader]").removeClass("active")}function l(o,i){let l=JSON.parse(ajaxapi.query_vars).category_name;if(localStorage.getItem("filtros")&&!i){let t=JSON.parse(localStorage.getItem("filtros"));t.category_name==l?$filtros=t:localStorage.removeItem("filtros")}else 0!=Object.keys($filtros).length&&($filtros.category_name=JSON.parse(ajaxapi.query_vars).category_name,localStorage.setItem("filtros",JSON.stringify($filtros)));e(),t.ajax({url:ajaxapi.ajaxurl,type:"post",data:{action:"get_estabelecimentos",query_vars:ajaxapi.query_vars,get:ajaxapi.get,post:ajaxapi.post,query:ajaxapi.query,filters:$filtros,page:$page},beforeSend:function(){s(!1),o||a(!1),r(!0),n(!1)},success:function(e){$imoveisTotais=e.total,$imoveisCarregadosTotais=e.imoveis.length,$i=0,a(!0),n(!0);var o,i,s,l=e.html;e.imoveis.forEach((t,e)=>{if(t.lat&&t.lng){let o={lat:t.lat,lng:t.lng};locations.push(o),imoveisHtml.push(l[e])}}),o=new google.maps.Map(document.getElementById("map"),{zoom:14,center:{lat:-8.06094,lng:-34.8801875},mapTypeControl:!1,streetViewControl:!1,rotateControl:!1}),i=new google.maps.InfoWindow,s=locations.map((function(t,e){var a=e,s=new google.maps.Marker({position:t,icon:ajaxapi.assets+"/img/layout/m2.png",label:{text:"1",textSize:13,fontFamily:"ITC Avant Garde Gothic",fontWeight:"bold",color:"white"}});return google.maps.event.addListener(s,"click",(function(t){i.setContent(imoveisHtml[a]),i.open(o,s)})),s})),new MarkerClusterer(o,s,{styles:[{url:ajaxapi.assets+"/img/layout/m1.png",width:53,height:53,fontFamily:"ITC Avant Garde Gothic",textSize:15,textColor:"white"}]}),r(!1),1==$imoveisTotais?t(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóvel com essas características"):(0==$imoveisTotais||$imoveisTotais>1)&&t(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóveis com essas características"),$imoveisTotais>0?t(".imoveis-blank").removeClass("show"):t(".imoveis-blank").addClass("show"),t(".imoveis-list .imoveis #loader, .imoveis-list .imoveis #error").remove(),t(".imoveis-list .imoveis .imoveis-row").append(e.html)},error:function(e,o,i){t(".imoveis-list .imoveis #loader").remove(),r(!1),s(!0,e.responseText)}})}function n(e){e?t("[data-loadmorebtn]").removeClass("d-none").addClass("d-block"):t("[data-loadmorebtn]").removeClass("d-block").addClass("d-none")}var d,m,c;$filtros={},$scroll=!0,$page=1,locations=[],imoveisHtml=[],$postVars=ajaxapi.post,$imoveisTotais=0,$postVars&&$postVars.length>0&&i(!0),l(),t("[data-loadmorebtn]").on("click",(function(e){e.preventDefault(),$page<$imoveisTotais&&t(".imoveis .imoveis-row > div").length<$imoveisTotais?($page+=1,l(!0)):n(!1)})),d=t("#footer").offset(),m=t(window).height(),c=d.top-m,console.log(c),t(window).on("scroll",(function(e){var o=t(window).scrollTop();console.log(o),o>500&&o<c?t(".col-right").addClass("fixed").removeClass("fixed-bottom"):o>c?t(".col-right").addClass("fixed-bottom").removeClass("fixed"):o<500&&t(".col-right").removeClass("fixed-bottom fixed")}))}(jQuery);