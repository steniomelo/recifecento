!function(e){function t(){$page=1,delete $filtros.paginado,delete $filtros.startpag,locations=[],imoveisHtml=[],e(".imoveis-list .imoveis .imoveis-row").html("")}function o(t){t?e("[data-filtered]").addClass("active"):e("[data-filtered]").removeClass("active")}function i(t){t?e("[data-total]").addClass("active"):e("[data-total]").removeClass("active")}function a(t,o){t?(e("[data-error]").addClass("active"),e("[data-error]").html(o)):e("[data-error]").removeClass("active")}function s(t){t?e("[data-loader]").addClass("active"):e("[data-loader]").removeClass("active")}function l(t){console.log("AjaxAPI >>>>>",ajaxapi),e.ajax({url:ajaxapi.ajaxurl,type:"post",data:{action:"get_estabelecimentos",query_vars:ajaxapi.query_vars,get:ajaxapi.get,post:ajaxapi.post,query:ajaxapi.query,filters:$filtros,page:$page},beforeSend:function(){a(!1),t||i(!1),s(!0),n(!1)},success:function(o){$imoveisTotais=o.total,$imoveisCarregadosTotais=o.imoveis.length,$i=0,i(!0),n(!0);var a,l,c,d=o.html,m=o.imoveis;console.log("Imoveis",m),m.forEach((e,t)=>{if(e.lat&&e.lng){let o={lat:e.lat,lng:e.lng};locations.push(o),imoveisHtml.push(d[t])}}),a=new google.maps.Map(document.getElementById("map"),{zoom:14,center:{lat:-8.06094,lng:-34.8801875},mapTypeControl:!1,streetViewControl:!1,rotateControl:!1}),l=new google.maps.InfoWindow,c=locations.map((function(e,t){var o=t,i=new google.maps.Marker({position:e,icon:ajaxapi.assets+"/img/layout/m2.png",label:{text:"1",textSize:13,fontFamily:"ITC Avant Garde Gothic",fontWeight:"bold",color:"white"}});return google.maps.event.addListener(i,"click",(function(e){l.setContent(imoveisHtml[o]),l.open(a,i)})),i})),new MarkerClusterer(a,c,{styles:[{url:ajaxapi.assets+"/img/layout/m1.png",width:53,height:53,fontFamily:"ITC Avant Garde Gothic",textSize:15,textColor:"white"}]}),s(!1),1==$imoveisTotais?e(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóvel com essas características"):(0==$imoveisTotais||$imoveisTotais>1)&&e(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóveis com essas características"),$imoveisTotais>0?e(".imoveis-blank").removeClass("show"):e(".imoveis-blank").addClass("show"),e(".imoveis-list .imoveis #loader, .imoveis-list .imoveis #error").remove(),e(".imoveis-list .imoveis .imoveis-row").append(o.html),e(window).width()>991&&e(".col-left .imoveis .imoveis-container").mCustomScrollbar({theme:"ang",autoHideScrollbar:!0,mouseWheel:{enable:!0,preventDefault:!1},scrollInertia:1e5,scrollbarPosition:"outside"}),t?r(!0):r()},error:function(t,o,i){e(".imoveis-list .imoveis #loader").remove(),s(!1),a(!0,t.responseText)}})}function r(t){e(window).width()>991&&(t?(e(".slick-slider").slick("unslick"),r()):(e("[data-imovelcard-slick]").slick({infinite:!1,autoplay:!1,slidesToShow:1,pauseOnHover:!1,pauseOnFocus:!1,arrows:!0,dots:!0,swipe:!1}),e("[data-imovelcard-slick]").find(".slick-dots").on("click",(function(e){e.preventDefault()})),e("[data-imovelcard-slick]").find(".slick-arrow").on("click",(function(e){e.preventDefault()}))))}function n(t){t?e("[data-loadmorebtn]").removeClass("d-none").addClass("d-block"):e("[data-loadmorebtn]").removeClass("d-block").addClass("d-none")}$filtros={},$scroll=!0,$page=1,locations=[],imoveisHtml=[],$postVars=ajaxapi.post,$imoveisTotais=0,$postVars&&$postVars.length>0&&o(!0),e(".filters .filter").each((function(){e(this).find("> button").on("click",(function(){e(this).parent().hasClass("opened")?(e(".filters .filter").removeClass("opened"),e(".filters").css({"overflow-x":"scroll"})):(e(".filters .filter").removeClass("opened"),e(this).parent().addClass("opened"),e(".filters").css("overflow","visible"))})),e(this).find(".btn-aplicar").on("click",(function(){e(this).parents(".filter").hasClass("valid")&&e(this).parents(".filter").removeClass("opened").addClass("active")})),e(this).find(".btn-limpar").on("click",(function(){e(this).parents(".filter").removeClass("active opened valid")}))})),e(".filter-subcategoria .dropdown-item").on("click",(function(){var o,i;o=e(this),i=o,$subcategoria=i.data("value"),e(".filter-subcategoria .btn").html(i.html()),$filtros.subcategoria=$subcategoria,t(),l()})),e(".filter-produto .dropdown-item").on("click",(function(){var o,i;o=e(this),i=o,$produto=i.data("value"),e(".filter-produto .btn").html(i.html()),$filtros.produto=$produto,t(),l()})),e(".filter-keyword").bind("enterKey",(function(){$filtros.keyword=e(this).val(),t(),l()})),e(".filter-keyword").keyup((function(t){13==t.keyCode&&e(this).trigger("enterKey")})),e("[data-filtered]").on("click",(function(){$filtros={},$ordenacao?$filtros.ordenacao=$ordenacao:delete $filtros.ordenacao,e(".filters .filter").removeClass("opened active valid"),o(!1),t(),l()})),l(),e("[data-loadmorebtn]").on("click",(function(t){t.preventDefault(),$page<$imoveisTotais&&e(".imoveis .imoveis-row > div").length<$imoveisTotais?($page+=1,l(!0)):n(!1)}))}(jQuery);