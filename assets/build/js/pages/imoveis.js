!function(e){function t(){$page=1,delete $filtros.paginado,delete $filtros.startpag,locations=[],imoveisHtml=[],e(".imoveis-list .imoveis .imoveis-row").html("")}function o(t){t?e("[data-filtered]").addClass("active"):e("[data-filtered]").removeClass("active")}function a(t){t?e("[data-total]").addClass("active"):e("[data-total]").removeClass("active")}function i(t,o){t?(e("[data-error]").addClass("active"),e("[data-error]").html(o)):e("[data-error]").removeClass("active")}function s(t){t?e("[data-loader]").addClass("active"):e("[data-loader]").removeClass("active")}function l(t){e.ajax({url:ajaxapi.ajaxurl,type:"post",data:{action:"get_estabelecimentos",query_vars:ajaxapi.query_vars,get:ajaxapi.get,post:ajaxapi.post,query:ajaxapi.query,filters:$filtros,page:$page},beforeSend:function(){i(!1),t||a(!1),s(!0),r(!1)},success:function(t){$imoveisTotais=t.total,$imoveisCarregadosTotais=t.imoveis.length,$i=0,a(!0),r(!0);var o,i,l,n=t.html;t.imoveis.forEach((e,t)=>{if(e.lat&&e.lng){let o={lat:e.lat,lng:e.lng};locations.push(o),imoveisHtml.push(n[t])}}),o=new google.maps.Map(document.getElementById("map"),{zoom:14,center:{lat:-8.06094,lng:-34.8801875},mapTypeControl:!1,streetViewControl:!1,rotateControl:!1}),i=new google.maps.InfoWindow,l=locations.map((function(e,t){var a=t,s=new google.maps.Marker({position:e,icon:ajaxapi.assets+"/img/layout/m2.png",label:{text:"1",textSize:13,fontFamily:"ITC Avant Garde Gothic",fontWeight:"bold",color:"white"}});return google.maps.event.addListener(s,"click",(function(e){i.setContent(imoveisHtml[a]),i.open(o,s)})),s})),new MarkerClusterer(o,l,{styles:[{url:ajaxapi.assets+"/img/layout/m1.png",width:53,height:53,fontFamily:"ITC Avant Garde Gothic",textSize:15,textColor:"white"}]}),s(!1),1==$imoveisTotais?e(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóvel com essas características"):(0==$imoveisTotais||$imoveisTotais>1)&&e(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóveis com essas características"),$imoveisTotais>0?e(".imoveis-blank").removeClass("show"):e(".imoveis-blank").addClass("show"),e(".imoveis-list .imoveis #loader, .imoveis-list .imoveis #error").remove(),e(".imoveis-list .imoveis .imoveis-row").append(t.html)},error:function(t,o,a){e(".imoveis-list .imoveis #loader").remove(),s(!1),i(!0,t.responseText)}})}function r(t){t?e("[data-loadmorebtn]").removeClass("d-none").addClass("d-block"):e("[data-loadmorebtn]").removeClass("d-block").addClass("d-none")}$filtros={},$scroll=!0,$page=1,locations=[],imoveisHtml=[],$postVars=ajaxapi.post,$imoveisTotais=0,$postVars&&$postVars.length>0&&o(!0),e(".filters .filter").each((function(){e(this).find("> button").on("click",(function(){e(this).parent().hasClass("opened")?(e(".filters .filter").removeClass("opened"),e(".filters").css({"overflow-x":"scroll"})):(e(".filters .filter").removeClass("opened"),e(this).parent().addClass("opened"),e(".filters").css("overflow","visible"))})),e(this).find(".btn-aplicar").on("click",(function(){e(this).parents(".filter").hasClass("valid")&&e(this).parents(".filter").removeClass("opened").addClass("active")})),e(this).find(".btn-limpar").on("click",(function(){e(this).parents(".filter").removeClass("active opened valid")}))})),e(".filter-subcategoria .dropdown-item").on("click",(function(){var o,a;o=e(this),a=o,$subcategoria=a.data("value"),e(".filter-subcategoria .btn").html(a.html()),$filtros.subcategoria=$subcategoria,t(),l()})),e(".filter-produto .dropdown-item").on("click",(function(){var o,a;o=e(this),a=o,$produto=a.data("value"),e(".filter-produto .btn").html(a.html()),$filtros.produto=$produto,t(),l()})),e(".filter-keyword").bind("enterKey",(function(){$filtros.keyword=e(this).val(),t(),l()})),e(".filter-keyword").keyup((function(t){13==t.keyCode&&e(this).trigger("enterKey")})),e("[data-filtered]").on("click",(function(){$filtros={},$ordenacao?$filtros.ordenacao=$ordenacao:delete $filtros.ordenacao,e(".filters .filter").removeClass("opened active valid"),o(!1),t(),l()})),l(),e("[data-loadmorebtn]").on("click",(function(t){t.preventDefault(),$page<$imoveisTotais&&e(".imoveis .imoveis-row > div").length<$imoveisTotais?($page+=1,l(!0)):r(!1)}))}(jQuery);