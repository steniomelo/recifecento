!function(a){function e(){$page=1,delete $filtros.paginado,delete $filtros.startpag,locations=[],imoveisHtml=[],a(".imoveis-list .imoveis .imoveis-row").html("")}function t(){e(),o(!0),r(),c()}function o(e){e?a("[data-filtered]").addClass("active"):a("[data-filtered]").removeClass("active")}function i(e){e?a("[data-total]").addClass("active"):a("[data-total]").removeClass("active")}function s(e,t){e?(a("[data-error]").addClass("active"),a("[data-error]").html(t)):a("[data-error]").removeClass("active")}function l(e){e?a("[data-loader]").addClass("active"):a("[data-loader]").removeClass("active")}function r(e){console.log("AjaxAPI >>>>>",ajaxapi),a.ajax({url:ajaxapi.ajaxurl,type:"post",data:{action:"get_estabelecimentos",query_vars:ajaxapi.query_vars,get:ajaxapi.get,post:ajaxapi.post,query:ajaxapi.query,filters:$filtros,page:$page},beforeSend:function(){s(!1),e||i(!1),l(!0),d(!1)},success:function(t){$imoveisTotais=t.total,$imoveisCarregadosTotais=t.imoveis.length,$i=0,i(!0),d(!0);var o=t.html,s=t.imoveis;console.log("Imoveis",s),s.forEach((a,e)=>{if(a.lat&&a.lng){let t={lat:a.lat,lng:a.lng};locations.push(t),imoveisHtml.push(o[e])}}),c(),l(!1),1==$imoveisTotais?a(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóvel com essas características"):(0==$imoveisTotais||$imoveisTotais>1)&&a(".listItemTotal [data-total]").html('Achamos <strong class="totalImoveis">'+$imoveisTotais+"</strong> imóveis com essas características"),$imoveisTotais>0?a(".imoveis-blank").removeClass("show"):a(".imoveis-blank").addClass("show"),a(".imoveis-list .imoveis #loader, .imoveis-list .imoveis #error").remove(),a(".imoveis-list .imoveis .imoveis-row").append(t.html),a(window).width()>991&&a(".col-left .imoveis .imoveis-container").mCustomScrollbar({theme:"ang",mouseWheel:{enable:!0,preventDefault:!1},scrollInertia:1e5,scrollbarPosition:"outside",callbacks:{onTotalScroll:function(){n()}}}),e?m(!0):m()},error:function(e,t,o){a(".imoveis-list .imoveis #loader").remove(),l(!1),s(!0,e.responseText)}})}function n(){$page<$imoveisTotais&&a(".imoveis .imoveis-row > div").length<$imoveisTotais?($page+=1,r(!0)):d(!1)}function c(){var a=new google.maps.Map(document.getElementById("map"),{zoom:14,center:{lat:-8.06094,lng:-34.8801875},mapTypeControl:!1,streetViewControl:!1,rotateControl:!1}),e=new google.maps.InfoWindow,t=locations.map((function(t,o){var i=o,s=new google.maps.Marker({position:t,icon:ajaxapi.assets+"/img/layout/m2.png",label:{text:"1",textSize:13,fontFamily:"ITC Avant Garde Gothic",fontWeight:"bold",color:"white"}});return google.maps.event.addListener(s,"click",(function(t){e.setContent(imoveisHtml[i]),e.open(a,s)})),s}));new MarkerClusterer(a,t,{styles:[{url:ajaxapi.assets+"/img/layout/m1.png",width:53,height:53,fontFamily:"ITC Avant Garde Gothic",textSize:15,textColor:"white"}]})}function m(e){a(window).width()>991&&(e?(a(".slick-slider").slick("unslick"),m()):(a("[data-imovelcard-slick]").slick({infinite:!1,autoplay:!1,slidesToShow:1,pauseOnHover:!1,pauseOnFocus:!1,arrows:!0,dots:!0,swipe:!1}),a("[data-imovelcard-slick]").find(".slick-dots").on("click",(function(a){a.preventDefault()})),a("[data-imovelcard-slick]").find(".slick-arrow").on("click",(function(a){a.preventDefault()}))))}function d(e){e?a("[data-loadmorebtn]").removeClass("d-none").addClass("d-block"):a("[data-loadmorebtn]").removeClass("d-block").addClass("d-none")}$filtros={},$scroll=!0,$page=1,locations=[],imoveisHtml=[],$postVars=ajaxapi.post,$imoveisTotais=0,$postVars&&$postVars.length>0&&o(!0),a(".filters .filter").each((function(){a(this).find("> button").on("click",(function(){a(this).parent().hasClass("opened")?(a(".filters .filter").removeClass("opened"),a(".filters").css({"overflow-x":"scroll"})):(a(".filters .filter").removeClass("opened"),a(this).parent().addClass("opened"),a(".filters").css("overflow","visible"))})),a(this).find(".btn-aplicar").on("click",(function(){a(this).parents(".filter").hasClass("valid")&&a(this).parents(".filter").removeClass("opened").addClass("active")})),a(this).find(".btn-limpar").on("click",(function(){a(this).parents(".filter").removeClass("active opened valid")}))})),function(){function e(e){var t=e.split(",");$precoMinimo=t[0],$precoMaximo=t[1],a(".filter-valor .range-header .range-min span").html(parseInt(t[0]).toLocaleString("pt-BR")),a(".filter-valor .range-header .range-max span").html(parseInt(t[1]).toLocaleString("pt-BR")),a(".filter-valor .value").html("R$ "+parseInt(t[1]).toLocaleString("pt-BR")),a(".filter-valor").addClass("valid")}function o(){a(".filter-valor").addClass("active"),$filtros.precoMinimo=$precoMinimo,$filtros.precoMaximo=$precoMaximo}a(".filter-valor .range-value").jRange({from:7e4,to:3e6,step:500,format:"R$ %s",showLabels:!1,showScale:!1,theme:"theme-blue",isRange:!0,onstatechange:function(a){e(a)}}),$postVars.valor&&"70000,3000000"!=$postVars.valor&&(e($postVars.valor),a(".filter-valor .range-value").jRange("setValue",$postVars.valor),o()),a(".filter-valor .btn-limpar").on("click",(function(){a(".filter-valor .range-value").jRange("setValue","70000,3000000"),delete $filtros.precoMinimo,delete $filtros.precoMaximo,t()})),a(".filter-valor .btn-aplicar").on("click",(function(e){a(".filter-valor").hasClass("valid")&&(o(),t())}))}(),a(".filter-tamanho .range-size").jRange({from:20,to:300,step:5,format:"%s m2",showLabels:!1,showScale:!1,theme:"theme-blue",isRange:!0,onstatechange:function(e){!function(e){var t=e.split(",");$areaMinimo=t[0],$areaMaximo=t[1],a(".filter-tamanho .range-header .range-min span").html($areaMinimo),a(".filter-tamanho .range-header .range-max span").html($areaMaximo),a(".filter-tamanho .value").html($areaMaximo+"m2"),a(".filter-tamanho").addClass("valid")}(e)}}),a(".filter-tamanho .btn-limpar").on("click",(function(){a(".filter-tamanho .range-size").jRange("setValue","20,300"),delete $filtros.areaPrivativaMinimo,delete $filtros.areaPrivativaMaximo,t()})),a(".filter-tamanho .btn-aplicar").on("click",(function(){a(".filter-tamanho").hasClass("valid")&&(a(".filter-tamanho").addClass("active"),$filtros.areaPrivativaMinimo=$areaMinimo,$filtros.areaPrivativaMaximo=$areaMaximo,t())})),function(){function e(e){$quartosMinimo=e,$quartosMaximo=4==e?"100":e,e>1?a(".filter-quartos .value").html($quartosMinimo+" quartos"):1==e&&a(".filter-quartos .value").html($quartosMinimo+" quarto"),a(".filter-quartos").addClass("valid")}function o(){a(".filter-quartos").addClass("active"),$filtros.quartosMinimo=$quartosMinimo,$filtros.quartosMaximo=$quartosMaximo}$postVars.quartos&&(e($postVars.quartos),a(".filter-quartos").find('[name="quartos"][value='+$postVars.quartos+"]").attr("checked","checked"),o()),a(".filter-quartos .btn-limpar").on("click",(function(){a('.filter-quartos [name="quartos"]').prop("checked",!1),delete $filtros.quartosMinimo,delete $filtros.quartosMaximo,t()})),a(".filter-quartos .btn-aplicar").on("click",(function(){a(".filter-quartos").find('[name="quartos"]:checked').val()&&(e(a(".filter-quartos").find('[name="quartos"]:checked').val()),a(".filter-quartos").hasClass("valid")&&(o(),t()))}))}(),function(){function e(e){$vagasMinimo=e,$vagasMaximo=3==e?"100":e,e>1?a(".filter-vagas .value").html($vagasMinimo+" vagas"):1==e?a(".filter-vagas .value").html($vagasMinimo+" vaga"):0==e&&a(".filter-vagas .value").html("Sem vagas"),a(".filter-vagas").addClass("valid")}function o(){a(".filter-vagas").addClass("active"),$filtros.garagensMinimo=$vagasMinimo,$filtros.garagensMaximo=$vagasMaximo}$postVars.vagas&&(e($postVars.vagas),a(".filter-vagas").find('[name="vagas"][value='+$postVars.vagas+"]").attr("checked","checked"),o()),a(".filter-vagas .btn-limpar").on("click",(function(){a('.filter-vagas [name="vagas"]').prop("checked",!1),delete $filtros.garagensMinimo,delete $filtros.garagensMaximo,t()})),a(".filter-vagas .btn-aplicar").on("click",(function(){a(".filter-vagas").find('[name="vagas"]:checked').val()&&(e(a(".filter-vagas").find('[name="vagas"]:checked').val()),a(".filter-vagas").hasClass("valid")&&(o(),t()))}))}(),a(".filter-ordenacao .dropdown-item").on("click",(function(){var t,o;t=a(this),o=t,$ordenacao=o.data("value"),a(".filter-ordenacao .btn").html(o.html()),$filtros.ordenacao=$ordenacao,e(),r()})),a(".filter-subcategoria .dropdown-item").on("click",(function(){var t,o;t=a(this),o=t,$subcategoria=o.data("value"),a(".filter-subcategoria .btn").html(o.html()),$filtros.subcategoria=$subcategoria,e(),r()})),a(".filter-produto .dropdown-item").on("click",(function(){var t,o;t=a(this),o=t,$produto=o.data("value"),a(".filter-produto .btn").html(o.html()),$filtros.produto=$produto,e(),r()})),a(".filter-keyword").bind("enterKey",(function(){$filtros.keyword=a(this).val(),e(),r()})),a(".filter-keyword").keyup((function(e){13==e.keyCode&&a(this).trigger("enterKey")})),a("[data-filtered]").on("click",(function(){$filtros={},$ordenacao?$filtros.ordenacao=$ordenacao:delete $filtros.ordenacao,a('.filter-vagas [name="vagas"]').prop("checked",!1),a('.filter-quartos [name="quartos"]').prop("checked",!1),a(".filter-tamanho .range-size").jRange("setValue","20,300"),a(".filter-valor .range-value").jRange("setValue","70000,3000000"),a(".filters .filter").removeClass("opened active valid"),o(!1),e(),r()})),r(),c(),a("[data-loadmorebtn]").on("click",(function(a){a.preventDefault(),n()})),a(document).on("scroll",(function(){a(document).scrollTop()>80&&a(document).scrollTop()<370?a(".col-right").removeClass("fixed-bottom").addClass("fixed"):a(document).scrollTop()>370?a(".col-right").removeClass("fixed").addClass("fixed-bottom"):a(".col-right").removeClass("fixed fixed-bottom")}))}(jQuery);